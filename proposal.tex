\providecommand{\classoptions}{keys}
%% The next two lines are suggested at
%% to work around the following error:
%%
%%  ----------------------------
%%  /usr/local/texlive/2018/texmf-dist/tex/latex/chngcntr/chngcntr.sty:42: LaTeX Error: Command \counterwithout already defined.
%%                 Or name \end... illegal, see p.192 of the manual.
%%
%%  See the LaTeX manual or LaTeX Companion for explanation.
%%  Type  H <return>  for immediate help.
%%   ...
%%
%%   l.42 ...thout}{\@ifstar{\c@t@soutstar}{\c@t@sout}}
%%   ----------------------------
%%
%% The two lines:
\let\counterwithout\relax
\let\counterwithin\relax
%% Suggested fix above taken from
%% https://tex.stackexchange.com/questions/425600/latex-error-command-counterwithout-already-defined
%%

\documentclass[
  deliverables,
  longtasklabels,
  numericcites,
  noworkareas,
  svgnames,
  \classoptions
]{euproposal}       % for writing
%\documentclass[submit,noworkareas,deliverables]{euproposal}        % for submission
%\documentclass[submit,public,noworkareas,deliverables]{euproposal} % for public version

\usepackage[utf8]{inputenc}
\usepackage{hyperref}
\usepackage{enumitem}
\usepackage{booktabs}

% \usepackage{minitoc}
%\usepackage{varioref}

\usepackage{float}  % used to suppress floating of tables in Resources section.
\usetikzlibrary{calc,fit,positioning,shapes,arrows,snakes}
\graphicspath{{tasks/}}

\addbibresource{bibliography.bib}
% temporary fix due to http://tex.stackexchange.com/questions/311426/bibliography-error-use-of-blxbblverbaddi-doesnt-match-its-definition-ve
\makeatletter\def\blx@maxline{77}\makeatother

% \input{WApersons} % Some sections of the included files depend on this.
\input{preamble}
\usepackage{framed}
\usepackage{multicol}
\usepackage{lipsum}

\newcommand{\allparticipants}{{SRL,MP,QS,UIO,IFR}}

\newcommand{\softwarename}[1]{\texttt{#1}}
\newcommand{\repotodocker}{\softwarename{repo2docker}}
\newcommand{\binderhub}{\softwarename{BinderHub}}
% \newcommand{\mybinder}{\softwarename{mybinder.org}} % mybinder.org in monospaced font
\newcommand{\mybinder}{mybinder.org}   % mybinder.org in normal proportional
% font
% \newcommand{\myemph}[1]{\emph{#1}}%    to try bf or emph in ambition section
\newcommand{\myemph}[1]{\textbf{#1}}%    to try bf or emph in ambition section

\newcommand{\noemph}[1]{#1}%    to switch off emphasis but keep the option to
                           %    de-activate it again later

%\newcommand*{\fullref}[1]{\ref{#1} \nameref*{#1}} % One

\newcommand*{\fullref}[1]{\hyperref[{#1}]{\ref{#1} \nameref*{#1}}}
% single clickable link of the style: 1.1 Concept
% source: https://tex.stackexchange.com/questions/121865/nameref-how-to-display-section-name-and-its-number



% longtaskref: T1.2: Title of task
\newcommand\longtaskref[2]{\csname task@#1@#2@label\endcsname: ``\csname task@#1@#2@title\endcsname''}



\begin{document}
\begin{draft}


\section*{Guidelines for proposal co-authors}

\begin{verbatim}
- Consistency.
  - [ ] Section or section or Sect or Sec? Use 'Section'
  - [ ] Figure or figure or Fig or Fig.? Use 'Figure'
  - [ ] Binder or binder - Binder? Use 'Binder'
  - [ ] MyBinder or Mybinder or mybinder? Use `mybinder.org` for the public
        instance of the service -> \mybinder

- we have a command \repotodocker to insert 'repo2docker' in \softwarename{}
  font.
- we have a command \binderhub to insert 'BinderHub'.
- we have a command \mybinder to insert 'mybinder.org'.
- Best use {} after the commands to enforce a space, i.e. ``\repotodocker{} is the focus''


- to discuss
  - ONHOLD [ ] names of work packages. Section 3.1.1
    - [X] Management
    - [ ] Core  -> enhancement? Robustness?
    - [ ] Impact -> new features? Increase impact?
    - [ ] Applications -> Use cases?
    - [ ] Education -> Dissemination? Education and Outreach?

    Hm, the long names see okay. Need to investigate where I got the short names
    from.


- should we list the expected outcomes of the call
  (https://github.com/minrk/horizon-widera-2022/blob/01eb74dd3d2a7786956fd2c46d1b9f90672affb6/call-information/call_information.txt#L16)
  and compare with expect outcomes of the project? Would be nice if we have the
  space and time.


- This nice section could be included in our approach (1.2.10):

  Facilitating Open and Reproducible Science by automating existing practices &
  A key to our philosophy and success thus far has been automating
  what scientists already are (or should be) doing.
  The approaches and environment specifications used in Binder are
  not specific to Binder, and are already widely adopted.
  We only seek to automate this process,
  and implement and document as many standards as we can find in use by the community.
  By implementing what is already in use,
  we minimise "lock-in" and meet users,
  lowering the barrier to adoption relative to "bespoke" tools,
  which require a large change in tooling, and significant disruption to researchers'
  work.

- [ ] Check size limit for pdf to upload (was it 10MB? Can be seen at upload
      menu in portal)
  - [ ] check size of final.pdf
  - [ ] if size is a problem, we can downsample the 'spectrogram.png' image.

\end{verbatim}

\section*{Todo items}
- [ ] describe our relation to the Binder team

\end{draft}
\clearpage

\begin{proposal}[
  % participants
  PI=mrk,
  mrkname=Benjamin Ragan-Kelley,
  mrkaffiliation=Simula Research Laboratory,
  mrkdept=Numerical Analysis and Scientific Computing,
  mrktitle=Dr.,
  % site descriptions
  site=SRL, % Simula
  SRLacronym=Simula,
  SRLshortname=Simula Research Laboratory,
  site=MP, % Max Planck
  MPacronym=MPG,
  MPshortname=Max Planck Gesellschaft,
  site=UIO, % U Oslo
  UIOacronym=UiO,
  UIOshortname=University of Oslo,
  site=IFR, % Ifremer
  IFRacronym=Ifremer,
  IFRshortname=Ifremer,
  site=QS, % QuantStack
  QSacronym=QuantStack,
  QSshortname=QuantStack,
  % site=XXX, % template example
  % alternative: (can be combined)
  coordinator=Dr. Benjamin Ragan-Kelley,
  Cemail=benjaminrk@simula.no,
  Ctelfax=(47) XXX-XX-XXX,
  %coordinatorsite=SRL,
  acronym={SOURCE},
  acrolong={SOURCE},
  proposalnumber={SEP-210850361},
  title={Supporting Open, Useful, and Reproducible Computational Environments},
  callname=Increasing the reproducibility of scientific results,
  callid=WIDERA-2022-ERA-01-41,
  % TODO: consistency with provided template
  % CALL: H2020-EINFRA-2015-1
  % TOPIC: e-Infrastructures for Virtual Research Environments (VRE)
  % Instrument: e-Infrastructures
  keywords={
  Open Science,
  reproducibility,
  reusability,
  education,
  accessibility,
  Jupyter,
  Binder,
  notebooks,
  cloud,
  EOSC,
  FAIR data,
  geosciences,
  health sciences,
  photon science
  },
  % computational mathematics,
  % GAP, Linbox, PARI, Sage, Singular, IPython, Jupyter, SageMathCloud, LMFDB, MathHub
  % Virtual research environments, MPIR, /GP
  % open source, free software, number theory, abstract algebra, notebooks
  instrument= Call: HORIZON-WIDERA-2022-ERA-01-41, %Call: H2020-EINFRA-2015-1, 3 Topic 9-2015
  challengeid = TODO,
  %challenge = {N/A},
  %objectiveid={N/A},
  %objective = TODO,
  %outcomeid = N/A,
  %outcomet = N/A,
  months=36,
  compactht]
\newcommand{\TheProject}{\pn}% \pn is defined automatically
% \input{grantagreement-history}
\ifgrantagreement
\else
\clearpage
\input{abstract}
\fi
\ifsubmit\else\setcounter{tocdepth}{4}\fi

\tableofcontents

\include{outline}

% ---------------------------------------------------------------------------
%  Section 1: Excellence
% ---------------------------------------------------------------------------

\section{Excellence}
\eucommentary{4 pages}
\eucommentary{\emph{
\begin{itemize}
\item Briefly describe the objectives of your proposed work. Why are they pertinent to the work programme topic? Are they measurable and verifiable? Are they realistically achievable?
\item	Describe how your project goes beyond the state-of-the-art, and the extent the proposed work is ambitious. Indicate any exceptional ground-breaking R-and-I, novel concepts and approaches, new products, services or business and organisational models. Where relevant, illustrate the advance by referring to products and services already available on the market. Refer to any patent or publication search carried out.
\item	Describe where the proposed work is positioned in terms of R-and-I maturity (i.e. where it is situated in the spectrum from idea to application, or from lab to market). Where applicable, provide an indication of the Technology Readiness Level, if possible distinguishing the start and by the end of the project.
\end{itemize}
Please bear in mind that advances beyond the state of the art must be interpreted in the light of the positioning of the project. Expectations will not be the same for RIAs at lower TRL, compared with Innovation Actions at high TRLs.
}
}
\medskip

\input{objectives-and-ambition.tex}
% \input{excellence.tex}
% \subsection{Objectives and ambition}
% \input{ambition.tex}
% \draftpage
% \input{objectives}
% \draftpage
% \input{relation_to_the_work_programme.tex}

% ---------------------------------------------------------------------------
%  Section 1.2: Methodology
% ---------------------------------------------------------------------------
\clearpage
\input{concept.tex}

% ---------------------------------------------------------------------------
%  Section 2: Impact
%  ---------------------------------------------------------------------------
\clearpage
\input{impact.tex}

\clearpage

% ---------------------------------------------------------------------------
%  Section 3: Implementation
% ---------------------------------------------------------------------------

\section{Quality and efficiency of the implementation}
\COMMENT{Typical granularity: 5-8 work packages with 3-5 tasks and one
  deliverable per task; 10 milestones}

\subsection{Work Plan and resources}

\label{sect:workplan}
\input{workplan}
\newpage

% management structure is removed, though some content may want to move
% # to workplan.tex
% \input{management_structure_and_procedures.tex}

\draftpage
\subsection{Capacity of participants and consortium as a whole}
\input{consortium.tex}
\draftpage


\end{proposal}
\TOWRITE{ALL}{Search through final.pdf ('make final') and look for questions
  marks ?? and XX and YY and XYZ as place holders where people intended to later
  add a link, or where a link is broken.}

\begin{draft}

  \TOWRITE{HF: The following tasks are all good. If we have time, check that we
    have covered them in the various WPs and tasks. }

  The task includes the following activities
  \begin{compactitem}
  \item extend repo2docker with support for execution on cloud resources
  \item extend repo2docker with support for execution on HPC resources with Docker support
  \item improved "first use" experience of running repo2docker locally
  \item define procedures and recommendations for long term reproducibility and sustainability of repo2docker compatible repositories
  \item create educational material describing repo2docker and its benefits to researchers
  \item Enable Openshift based deployments of BinderHub
  \item User surveys about pain points using BinderHub
  \item User authentication in BinderHub
  \end{compactitem}
  \end{draft}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:

%  LocalWords:  sud logilab urich Simula thiery acrolong igital esearch nvironments pn wp
%  LocalWords:  athematics pnlong callname callid challengeid objectiveid outcomeid emph
%  LocalWords:  compactht newcommand tableofcontents Linbox IPython textbf eucommentary
%  LocalWords:  vre TOWRITE citability Cython Laboratoire Recherche Informatique devs WPs
%  LocalWords:  clearpage draftpage programme workplan subsubsection pdatacount wplist sc
%  LocalWords:  WPref dissem pageref newpage sssec hline ganttchart xscale makeatletter
%  LocalWords:  makeatother wpfigstyle footnotesize tabcolsep wpfig inputdelivs mgt smc
%  LocalWords:  mathsoftware mathdb mathknowledge jupyter silesia pythran Pythran ldots
%  LocalWords:  Simulagora stigmatisation compactenum planetmath.org Univ botupPM Gnuplot
%  LocalWords:  boxedminipage textwidth compactitem fangohr providecommand classoptions
%  LocalWords:  ifsubmit setcounter tocdepth neighbouring incentivesed Gowers analyse hpc
%  LocalWords:  incentivised Ebay taskref structdocs taskref minimising parallelisation
%  LocalWords:  dksbases decisionmaking oommf-nb-evaluation gantttaskchart yscale Belabas
%  LocalWords:  Boussicault endeavours github isocial-decisionmaking enlargethispage
