\providecommand{\classoptions}{keys}
%% The next two lines are suggested at
%% to work around the following error:
%%
%%  ----------------------------
%%  /usr/local/texlive/2018/texmf-dist/tex/latex/chngcntr/chngcntr.sty:42: LaTeX Error: Command \counterwithout already defined.
%%                 Or name \end... illegal, see p.192 of the manual.
%%
%%  See the LaTeX manual or LaTeX Companion for explanation.
%%  Type  H <return>  for immediate help.
%%   ...
%%
%%   l.42 ...thout}{\@ifstar{\c@t@soutstar}{\c@t@sout}}
%%   ----------------------------
%%
%% The two lines:
\let\counterwithout\relax
\let\counterwithin\relax
%% Suggested fix above taken from
%% https://tex.stackexchange.com/questions/425600/latex-error-command-counterwithout-already-defined
%%
\documentclass[
  deliverables,
  longtasklabels,
  noworkareas,
  svgnames,
  \classoptions
]{euproposal}       % for writing
%\documentclass[submit,noworkareas,deliverables]{euproposal}        % for submission
%\documentclass[submit,public,noworkareas,deliverables]{euproposal} % for public version

\usepackage[utf8]{inputenc}
\usepackage{hyperref}
% \usepackage{minitoc}

%\usepackage{varioref}

\usepackage{float}  % used to suppress floating of tables in Resources section.
\usetikzlibrary{calc,fit,positioning,shapes,arrows,snakes}
\graphicspath{{tasks/}}

\addbibresource{bibliography.bib}
% temporary fix due to http://tex.stackexchange.com/questions/311426/bibliography-error-use-of-blxbblverbaddi-doesnt-match-its-definition-ve
\makeatletter\def\blx@maxline{77}\makeatother

% \input{WApersons} % Some sections of the included files depend on this.
\input{preamble}
\usepackage{framed}

\newcommand{\allparticipants}{{SRL,MP,QS,UIO,IFR}}

\newcommand{\softwarename}[1]{\texttt{#1}}
\newcommand{\repotodocker}{\softwarename{repo2docker}}
\newcommand{\binderhub}{\softwarename{BinderHub}}

%\newcommand*{\fullref}[1]{\ref{#1} \nameref*{#1}} % One

\newcommand*{\fullref}[1]{\hyperref[{#1}]{\ref{#1} \nameref*{#1}}}
% single clickable link of the style: 1.1 Concept
% source: https://tex.stackexchange.com/questions/121865/nameref-how-to-display-section-name-and-its-number



% longtaskref: T1.2: Title of task
\newcommand\longtaskref[2]{\csname task@#1@#2@label\endcsname: ``\csname task@#1@#2@title\endcsname''}



\begin{document}
\begin{draft}


\section*{Guidelines for proposal co-authors}

How do we describe the tools?
\begin{itemize}
\item  ``Binder tools'' - these are in particular \repotodocker{} and
  \binderhub{}

  We have a dedicated section describing the tools in

  \vfill This page is only visible in \texttt{draft} mode (i.e. when using
  \texttt{make draft}).

\end{itemize}

\section*{Todo items}

\begin{verbatim}
- [X] define ``repository'' for the purpose of this application:
  - could be a git repository
  - collection of files
  - containing information on what software environment is needed
  - may contain additional software
  - may contain notebooks
  - may contain data

  - [X] include example in concept somewhere

- Consistency
  - [ ] Section or section or Sect or Sec.
  - [ ] Figure or figure or Fig or Fig.
  - [ ] Binder or binder

- [ ] have a generic section on reproducibility and things we talk about here
  - [X] a repository
  - [X] software environment / ways how to specify this (step A)
  - [ ] executing anotebook in this environment (step B)
  - [ ] step A and B are the reproducibility steps we care about here
  - [ ] other aspects of reproducibility: knowing which commands to repeat,
knowing where to deposit software, and data, ...
  - [ ] myBinder.org

- [ ] LaTeX layout items
  - [ ] can we switch the citation style so that we use [1], [2], [3], instead
of [Beg+21], [17a] and []? I think our references where we don't provide authors
(because it is a git repo and the authors don't matter so much) break the
current style. It may be necessary to change this in the Proposalclass. The
relevant line may look something like
'usepackage[maxbibnames=6,hyperref=auto,style=numeric,backend=bibtex]{biblatex}'.
Madison - how good is your LaTeX?

\end{verbatim}

\end{draft}
\clearpage

\begin{proposal}[
  % participants
  PI=mrk,
  mrkname=Benjamin Ragan-Kelley,
  mrkaffiliation=Simula Research Laboratory,
  mrkdept=Numerical Analysis and Scientific Computing,
  mrktitle=Dr.,
  % site descriptions
  site=SRL, % Simula
  SRLacronym=Simula,
  SRLshortname=Simula Research Laboratory,
  site=MP, % Max Planck
  MPacronym=MPG,
  MPshortname=Max Planck Gesellschaft,
  site=UIO, % U Oslo
  UIOacronym=UiO,
  UIOshortname=University of Oslo,
  site=IFR, % Ifremer
  IFRacronym=Ifremer,
  IFRshortname=Ifremer,
  site=QS, % QuantStack
  QSacronym=QuantStack,
  QSshortname=QuantStack,
  % site=XXX, % template example
  % alternative: (can be combined)
  coordinator=Dr. Benjamin Ragan-Kelley,
  Cemail=benjaminrk@simula.no,
  Ctelfax=(47) XXX-XX-XXX,
  %coordinatorsite=SRL,
  acronym={SOURCE},
  acrolong={SOURCE},
  proposalnumber={SEP-210850361},
  title={Supporting Open, Useful and Reproducible Computational Environments},
  callname=Increasing the reproducibility of scientific results,
  callid=WIDERA-2022-ERA-01-41,
  % TODO: consistency with provided template
  % CALL: H2020-EINFRA-2015-1
  % TOPIC: e-Infrastructures for Virtual Research Environments (VRE)
  % Instrument: e-Infrastructures
  keywords={
  Open Science,
  reproducibility,
  reusability,
  education,
  accessibility,
  Jupyter,
  Binder,
  notebooks,
  cloud,
  EOSC,
  FAIR data,
  geosciences,
  health sciences,
  photon science
  },
  % computational mathematics,
  % GAP, Linbox, PARI, Sage, Singular, IPython, Jupyter, SageMathCloud, LMFDB, MathHub
  % Virtual research environments, MPIR, /GP
  % open source, free software, number theory, abstract algebra, notebooks
  instrument= Call: HORIZON-WIDERA-2022-ERA-01-41, %Call: H2020-EINFRA-2015-1, 3 Topic 9-2015
  challengeid = TODO,
  %challenge = {N/A},
  %objectiveid={N/A},
  %objective = TODO,
  %outcomeid = N/A,
  %outcomet = N/A,
  months=36,
  compactht]
\newcommand{\TheProject}{\pn}% \pn is defined automatically
% \input{grantagreement-history}
\ifgrantagreement
\else
\clearpage
\input{abstract}
\fi
\ifsubmit\else\setcounter{tocdepth}{4}\fi
\tableofcontents

\include{outline}

% ---------------------------------------------------------------------------
%  Section 1: Excellence
% ---------------------------------------------------------------------------

\section{Excellence}
\input{excellence.tex}

\subsection{Objectives and ambition}
\input{ambition.tex}
\draftpage
\input{objectives}
\draftpage
\input{relation_to_the_work_programme.tex}

% ---------------------------------------------------------------------------
%  Section 1.2: Methodology
% ---------------------------------------------------------------------------
\clearpage
\input{concept.tex}

% ---------------------------------------------------------------------------
%  Section 2: Impact
%  ---------------------------------------------------------------------------
\clearpage
\input{impact.tex}

\clearpage

% ---------------------------------------------------------------------------
%  Section 3: Implementation
% ---------------------------------------------------------------------------

\section{Quality and efficiency of the implementation}
\COMMENT{Typical granularity: 5-8 work packages with 3-5 tasks and one
  deliverable per task; 10 milestones}

\subsection{Work Plan and resources}

\label{sect:workplan}
\input{workplan}
\newpage

% management structure is removed, though some content may want to move
% # to workplan.tex
% \input{management_structure_and_procedures.tex}

\draftpage
\subsection{Capacity of participants and consortium as a whole}
\input{consortium.tex}
\draftpage


\end{proposal}
\TOWRITE{ALL}{Search through final.pdf ('make final') and look for questions
  marks ?? and XX and YY and XYZ as place holders where people intended to later
  add a link, or where a link is broken.}

\begin{draft}

  \TOWRITE{HF: The following tasks are all good. If we have time, check that we
    have covered them in the various WPs and tasks. }

  The task includes the following activities
  \begin{compactitem}
  \item extend repo2docker with support for execution on cloud resources
  \item extend repo2docker with support for execution on HPC resources with Docker support
  \item improved "first use" experience of running repo2docker locally
  \item define procedures and recommendations for long term reproducibility and sustainability of repo2docker compatible repositories
  \item create educational material describing repo2docker and its benefits to researchers
  \item Enable Openshift based deployments of BinderHub
  \item User surveys about pain points using BinderHub
  \item User authentication in BinderHub
  \end{compactitem}
  \end{draft}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:

%  LocalWords:  sud logilab urich Simula thiery acrolong igital esearch nvironments pn wp
%  LocalWords:  athematics pnlong callname callid challengeid objectiveid outcomeid emph
%  LocalWords:  compactht newcommand tableofcontents Linbox IPython textbf eucommentary
%  LocalWords:  vre TOWRITE citability Cython Laboratoire Recherche Informatique devs WPs
%  LocalWords:  clearpage draftpage programme workplan subsubsection pdatacount wplist sc
%  LocalWords:  WPref dissem pageref newpage sssec hline ganttchart xscale makeatletter
%  LocalWords:  makeatother wpfigstyle footnotesize tabcolsep wpfig inputdelivs mgt smc
%  LocalWords:  mathsoftware mathdb mathknowledge jupyter silesia pythran Pythran ldots
%  LocalWords:  Simulagora stigmatisation compactenum planetmath.org Univ botupPM Gnuplot
%  LocalWords:  boxedminipage textwidth compactitem fangohr providecommand classoptions
%  LocalWords:  ifsubmit setcounter tocdepth neighbouring incentivesed Gowers analyse hpc
%  LocalWords:  incentivised Ebay taskref structdocs taskref minimising parallelisation
%  LocalWords:  dksbases decisionmaking oommf-nb-evaluation gantttaskchart yscale Belabas
%  LocalWords:  Boussicault endeavours github isocial-decisionmaking enlargethispage
